let loading=document.querySelector("#loader"),canvas=document.querySelector(".webgl"),scene=new THREE.Scene,textureLoader=new THREE.TextureLoader,sizes={width:window.innerWidth,height:window.innerHeight},camera=(window.innerWidth<window.innerHeight?window.innerWidth<window.innerHeight/2?sizes.height=window.innerHeight/3:(sizes.width=window.innerWidth/1.5,sizes.height=window.innerHeight/1.5):window.innerWidth<window.innerHeight/.5?(sizes.width=window.innerWidth/2,sizes.height=window.innerHeight/2):sizes.width=window.innerWidth/4,new THREE.PerspectiveCamera(window.innerWidth<1e3?20:15,sizes.width/sizes.height,.1,100)),controls=(camera.position.set(8,5,15),scene.add(camera),new THREE.OrbitControls(camera,canvas)),renderer=(controls.enableDamping=!0,controls.enableZoom=!0,controls.enablePan=!0,controls.minDistance=21,controls.maxDistance=50,controls.minPolarAngle=Math.PI/5,controls.maxPolarAngle=Math.PI/2,new THREE.WebGLRenderer({canvas:canvas,antialias:!0,alpha:!0})),textureUrls=(renderer.setSize(sizes.width,sizes.height),renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),renderer.outputEncoding=THREE.sRGBEncoding,["https://assets.btwoa.com/baked.jpg","https://assets.btwoa.com/baked-alt.jpg"]),selectedTextureUrl=textureUrls[Math.floor(Math.random()*textureUrls.length)],bakedTexture=textureLoader.load(selectedTextureUrl,()=>{console.log("Texture loaded successfully:",selectedTextureUrl)},void 0,e=>{console.error("Error loading texture:",e)}),bakedMaterial=(bakedTexture.flipY=!1,bakedTexture.encoding=THREE.sRGBEncoding,new THREE.MeshBasicMaterial({map:bakedTexture})),loader=new THREE.GLTFLoader;function loadModel(i){loader.load(i,e=>{e=e.scene;e.traverse(e=>e.material=bakedMaterial),scene.add(e),scene.position.set(0,.2,0),loading.style.display="none",console.log("Model loaded successfully from:",i)},e=>{console.log(e.loaded/e.total*100+"% loaded")},e=>{console.error("Failed to load model from:",i,e),"https://assets.btwoa.com/model.glb"===i&&(console.log("Retrying with /model.glb..."),loadModel("/model.glb"))})}loadModel("https://assets.btwoa.com/model.glb"),window.addEventListener("resize",()=>{window.innerWidth<window.innerHeight?window.innerWidth<window.innerHeight/2?sizes.height=window.innerHeight/3:(sizes.width=window.innerWidth/1.5,sizes.height=window.innerHeight/1.5):window.innerWidth<window.innerHeight/.5?(sizes.width=window.innerWidth/2,sizes.height=window.innerHeight/2):sizes.width=window.innerWidth/4,camera.aspect=sizes.width/sizes.height,camera.updateProjectionMatrix(),renderer.setSize(sizes.width,sizes.height),renderer.setPixelRatio(Math.min(window.devicePixelRatio,2))});let minPan=new THREE.Vector3(-2,-.5,-2),maxPan=new THREE.Vector3(2,.5,2),tick=()=>{controls.update(),controls.target.clamp(minPan,maxPan),renderer.render(scene,camera),window.requestAnimationFrame(tick)};tick();
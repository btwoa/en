let coverColor=()=>{var e=PAGE_CONFIG.color;e?setThemeColors(e):(e=document.getElementById("post-cover")?.src)?handleApiColor(e):setDefaultThemeColors()},handleApiColor=e=>{var o=(JSON.parse(localStorage.getItem("Solitude"))||{}).postcolor?.[e]?.value;o?setThemeColors(o):img2color(e)},img2color=o=>{fetch(o+"?imageAve").then(e=>e.json()).then(({RGB:e})=>{e="#"+e.slice(2),setThemeColors(e),cacheColor(o,e)}).catch(console.error)},setThemeColors=e=>{if(!e)return setDefaultThemeColors();var[o,t,r]=e.match(/\w\w/g).map(e=>parseInt(e,16)),[e,a,l,n]=[""+e,e+"23",e+"dd",e+"00"];document.documentElement.style.setProperty("--ba-main",e),document.documentElement.style.setProperty("--ba-main-op",a),document.documentElement.style.setProperty("--ba-main-op-deep",l),document.documentElement.style.setProperty("--ba-main-none",n),adjustBrightness(o,t,r),document.getElementById("coverdiv").classList.add("loaded"),initThemeColor()},setDefaultThemeColors=()=>{["--ba-theme","--ba-theme-op","--ba-theme-op-deep","--ba-theme-none"].forEach((e,o)=>document.documentElement.style.setProperty(["--ba-main","--ba-main-op","--ba-main-op-deep","--ba-main-none"][o],`var(${e})`)),initThemeColor()},cacheColor=(e,o)=>{var t=JSON.parse(localStorage.getItem("Solitude"))||{postcolor:{}};t.postcolor[e]={value:o,expiration:Date.now()+coverColorConfig.time},localStorage.setItem("Solitude",JSON.stringify(t))},adjustBrightness=(e,o,t)=>{Math.round((299*e+587*o+114*t)/1e3)<125&&(document.querySelectorAll(".card-content").forEach(e=>e.style.setProperty("--ba-card-bg","var(--ba-white)")),document.querySelectorAll(".author-info__sayhi").forEach(e=>{e.style.setProperty("background","var(--ba-white-op)"),e.style.setProperty("color","var(--ba-white)")}))};